需求文档
1. 背景
现有的GitHub项目以网站的HTML为输入，输出结构化的JSON文档。
目前，HTML解析逻辑尚未打包为MCP服务器。

2. 目标
将HTML解析组件集成到MCP（模型上下文协议）服务器中，并构建一个管道，其中多个MCP模块协同工作，处理QS世界大学排名前500名单中的大学网站。

3. 详细需求
3.1 系统工作流程
**步骤1：搜索MCP**
- 负责搜索QS500大学名单，检索有哪些学校
- 将搜索结果保存下来

**步骤2：浏览器MCP（Playwright）**
- 打开每个学校的官方网站
- 获取页面的原始HTML内容

**步骤3：HTML解析MCP**
- 将网页HTML解析成简单的JSON格式
- 作为独立的MCP服务器封装，支持重复调用

**步骤4：决策模型（基于LLM）**
- 根据解析的JSON判断下一步操作
- 确定应该点击哪些按钮或链接

**步骤5：浏览器MCP（Playwright）交互操作**
- 根据决策模型的指示点击按钮或链接
- 获取点击后的新HTML页面
- 必要时支持返回上一页操作

**步骤6：HTML解析MCP重复处理**
- 将新的HTML交给解析MCP处理
- 解析成新的JSON格式

**循环处理机制：**
- 重复执行步骤4-5-6的循环
- 直到处理完成或失败为止
- 每次循环都调用HTML解析MCP服务器

3.2 约束条件和注意事项

**网站多样性挑战：**
- 不同的网站有不同的布局和结构
- 基于规则的解析方法不足以应对所有情况
- 需要灵活的解析策略

**Playwright MCP职责：**
- 负责获取HTML内容
- 处理所有网页交互操作（点击、填写表单等）
- 支持页面导航（前进、后退）
- 管理浏览器会话状态

**HTML解析MCP要求：**
- 必须封装为独立的MCP服务器
- 支持重复调用和循环处理
- 提供统一的JSON输出格式
- 具备错误处理和异常恢复能力

**架构设计原则：**
- 支持循环处理机制，直到数据提取完成或失败
- 各MCP模块间松耦合，便于维护和扩展
- 提供清晰的状态管理和错误处理机制