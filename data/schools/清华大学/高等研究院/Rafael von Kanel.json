{
    "html": "<!DOCTYPE html><html><head>\n\t<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n\t<title>清华大学用户电子身份服务系统</title>\n\t<meta charset=\"utf-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n\n\t\n<script src=\"/res/ui/jquery.min.js\"></script>\n<script src=\"/common/public/all-messages.js\"></script>\n<script src=\"/res/ui/noty/packaged/jquery.noty.packaged.min.js\"></script>\n<script src=\"/res/selfservice/noty.common.js\"></script>\n<script src=\"/res/common/js/common.js\"></script>\n<script src=\"/res/common/js/session.js\"></script>\n<script src=\"/res/bootstrap/js/bootstrap.js\"></script>\n<script src=\"/res/bootstrap/js/jquery.browser.js\"></script>\n<script src=\"/res/ui/momentjs/moment.min.js\"></script>\n<script src=\"/res/ui/loading/jquery.showLoading.min.js\"></script>\n<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->\n<!--[if lt IE 9]>\n\t<script src=\"/res/bootstrap/js/html5shiv.min.js\"></script>\n\t<script src=\"/res/bootstrap/js/respond.min.js\"></script>\n<![endif]-->\n<script src=\"/res/ui/react/classnames.js\"></script>\n<!-- \n<script src=\"/res/ui/react/react.min.js\"></script>\n<script src=\"/res/ui/react/react-dom.min.js\"></script>\n<script src=\"/res/ui/react-bootstrap/react-bootstrap.min.js\"></script>\n-->\n<script src=\"/res/ui/react/react.js\"></script>\n<script src=\"/res/ui/react/react-dom.js\"></script>\n<script src=\"/res/ui/react-bootstrap/react-bootstrap.js\"></script>\n\n<script src=\"/res/react/components.js\"></script>\n<script src=\"/res/selfservice/browser-alert.js\"></script>\n<script> $.extend(uidm, {\"availableLocales\":[{\"locale\":\"zh_CN\",\"display\":\"中文\"},{\"locale\":\"en_US\",\"display\":\"English\"}],\"baseUrl\":\"\",\"requestUrl\":\"/do/off/ui/auth/login/form/20843963f89b3072788f7fe75a5d9322/0?/thu-oauth/callback?sig=98226701d191a7ae41e3e0d1d41b21c237b2273c1c05854943969ca2f4282ef9d141319f9bc20f2cc17aac6952215045a78b657fe40c775f4dbb23c2399c8c3d71f4ce74b8211fcb4849bacd24f4c0df1108b400333d130be992d1870f851097451f74faab9e5e660fc158a2c4b7d36b15a5fd43ca2bbfcf26045fe40c142ee32c21cb9c38dfd7005e64be0f807c351e0c8013de391bbe06156319ddc1c29d150416e483f7b5a5b053ca0a2885444e66e2e1d23a55e45a4b2fbc60474f9eb061\",\"locale\":\"zh_CN\",\"authenticated\":false,\"accountMenu\":null}); </script>\n\n\n\t<script type=\"text/javascript\" src=\"/v2/dist/doubleauth/localstorageUtil.js?v=37\"></script>\n\t<script type=\"text/javascript\" src=\"/ui/auth/js/fingerprintUtil.js?v=37\"></script>\n\t<link type=\"text/css\" href=\"/res/bootstrap/css/signin.css?ver=&amp;v=6\" rel=\"stylesheet\">\n\t<style>.jumbotron .alert-danger.fade.show{opacity: 1;}</style>\n\t<script type=\"text/javascript\" src=\"/ui/auth/js/QrCode/qrcode.js\"></script>\n\t<script type=\"text/javascript\" src=\"/v2/dist/doubleauth/sm2Util.js?v=37\"></script>\n\t<script type=\"text/javascript\">\n\t\tfunction parseAndConstructUrl(originalUrl) {\n\t\t\t// 提取appid\n\t\t\tconst appIdMatch = originalUrl.match(/\\/form\\/([a-f0-9]+)/);\n\t\t\tconst appid = appIdMatch ? appIdMatch[1] : '';\n\t\t\t// 提取seq\n\t\t\tconst seqMatch = originalUrl.match(/\\/form\\/[a-f0-9]+\\/(\\d+)/);\n\t\t\tconst seq = seqMatch ? seqMatch[1] : '0'; // 如果没有seq，则默认为0\n\t\t\t// 提取selfredirectUri\n\t\t\t// 匹配从第一个?开始到URL结束的部分\n\t\t\tconst selfredirectUriMatch = originalUrl.match(/\\?(.*)/);\n\t\t\tconst selfredirectUri = selfredirectUriMatch ? selfredirectUriMatch[1] : '';\n\t\t\t// 构造目标URL\n\t\t\tlet targetUrl = '/wechat/getFaceLoginUrl?backserver=yes&appid='+appid+'&seq='+seq+'&thirdPart=true';\n\t\t\t// 如果selfredirectUri不为空，则拼接\n\t\t\tif (selfredirectUri) {\n\t\t\t\ttargetUrl += '&selfredirectUri='+selfredirectUri;\n\t\t\t}\n\n\t\t\treturn targetUrl;\n\t\t}\n\t\tfunction isWechatBrowser() {\n\t\t\tconst userAgent = navigator.userAgent.toLowerCase();\n\t\t\treturn userAgent.includes('micromessenger');\n\t\t}\n\t\tconst notautologin = \"\";\n\t\tconst enableWeChatLogined = \"true\";\n\t\tif(isWechatBrowser() && notautologin !== \"true\" && enableWeChatLogined==\"true\"){\n\t\t\twindow.location.href = parseAndConstructUrl(window.location.href);\n\t\t}\n\n\n\n\t\t$.extend(uidm, {\"ss\": {\"props\": {\"pwdAlertThresholdInDays\":90,\"smsIntervalInSec\":60,\"smsVericodeExpInMin\":3,\"smsVericodeExpAfterAttempts\":5,\"smsVericodeLen\":6,\"frm\":{\"alum\":{\"userTypeWhitelist\":[\"X0031\",\"X0021\",\"X0011\"]}}}}});\n\t\tfunction keyLogin(){\n\t\t\tif (event.keyCode==13){   //回车键的键值为13\n\t\t\t\tdoLogin();\n\t\t\t}\n\t\t}\n\t\tvar isCaptchaOk = false;\n\t\t//校验验证码\n\t\tfunction checkCaptcha(){\n\t\t\tvar captcha = $(\"#i_code\").val();\n\t\t\tif(captcha.length == 4){\n\t\t\t\tvar url =\"/do/off/ui/auth/login/captcha/\"+captcha+\"/check\";\n\t\t\t\t$.ajax({\n\t\t\t\t\turl : url,\n\t\t\t\t\ttype : \"POST\",\n\t\t\t\t\tsuccess : function(resp) {\n\t\t\t\t\t\t$(\"#captchaIcon\").removeClass(\"glyphicon-remove\").removeClass(\"glyphicon-ok\");\n\t\t\t\t\t\tif(resp.result ==\"success\"){\n\t\t\t\t\t\t\t$(\"#captchaIcon\").addClass(\"glyphicon-ok\");\n\t\t\t\t\t\t\t$(\"#captchaIcon\").css(\"color\",\"green\");\n\t\t\t\t\t\t\tisCaptchaOk = true;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t$(\"#captchaIcon\").addClass(\"glyphicon-remove\");\n\t\t\t\t\t\t\t$(\"#captchaIcon\").css(\"color\",\"red\");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$(\"#captchaIcon\").removeClass(\"hidden\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}else if(captcha.length > 4){\n\t\t\t\t$(\"#captchaIcon\").removeClass(\"glyphicon-remove\").removeClass(\"glyphicon-ok\");\n\t\t\t\tisCaptchaOk = false;\n\t\t\t\t$(\"#captchaIcon\").addClass(\"glyphicon-remove\");\n\t\t\t\t$(\"#captchaIcon\").css(\"color\",\"red\");\n\t\t\t\t$(\"#captchaIcon\").removeClass(\"hidden\");\n\t\t\t}else if(captcha.length < 4){\n\t\t\t\tisCaptchaOk = false;\n\t\t\t\tif(!$(\"#captchaIcon\").hasClass(\"hidden\")){\n\t\t\t\t\t$(\"#captchaIcon\").addClass(\"hidden\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction refreshCaptcha() {\n\n\n\t\t\tif(!$(\"#captchaIcon\").hasClass(\"hidden\")){\n\t\t\t\t$(\"#captchaIcon\").addClass(\"hidden\");\n\t\t\t}\n\n\t\t\t$(\"#captcha\").attr(\"src\", \"/captcha.jpg?t=\"+(new Date().getTime()));\n\t\t}\n\n\t\tfunction doLogin() {\n\t\t\tif ($(\"#i_user\").val()==\"\" || $(\"#i_user\").val()==\"用户名\") {\n\t\t\t\t$(\"#msg_note\").html(\"请输入用户名\");\n\t\t\t\t$(\"#c_note\").show();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ($(\"#i_pass\").val()==\"\" || $(\"#i_pass\").val()==\"密码\") {\n\t\t\t\t$(\"#msg_note\").html(\"请输入密码\");//请输入密码\n\t\t\t\t$(\"#c_note\").show();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!$(\"#c_code\").hasClass(\"hidden\")) {\n\t\t\t\tisCaptchaOk = true;\n\t\t\t\tif ($(\"#i_code\").val().length!=4 || !isCaptchaOk) {\n\t\t\t\t\t$(\"#msg_note\").html(\"您输入的验证码不正确\");\n\t\t\t\t\t$(\"#c_note\").show();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//修改密码加密\n\t\t\tvar publicKey = $(\"#sm2publicKey\").text();\n\t\t\tvar pass = $(\"#i_pass\").val();\n\t\t\t//$(\"#sm2pass\").val(pass);\n\t\t\tvar encryptPass = sm2Util.doEncryptStr(pass,publicKey);\n\t\t\t$(\"#sm2pass\").val(encryptPass);\n\n\t\t\tlocalstorageUtil.getFinger3FromLocal().then(function(res){\n\t\t\t\t$(\"#fingerGenPrint\").val(res)\n\t\t\t\t$(\"#theform\").submit();\n\t\t\t});\n\n\n\t\t}\n\n\t\t$(document).ready(function(){\n\t\t\tif($(\"#i_user\").val()!=\"\"){\n\t\t\t\t$(\"#i_user\").attr(\"readonly\",\"readonly\");\n\t\t\t}\n\t\t\trefreshCaptcha();\n\n\t\t\t//处理检验验证码的兼容问题\n\t\t\t$(\"#i_code\").bind('propertychange', function() {\n\t\t\t\tcheckCaptcha();\n\t\t\t});\n\n\t\t\t$(\"#i_code\").bind('input', function() {\n\t\t\t\tcheckCaptcha();\n\t\t\t});\n\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\n\t\t\t\n\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t});\n\t</script>\n\t<link type=\"text/css\" href=\"/ui/activation/css/reset.css\" rel=\"stylesheet\">\n<link type=\"text/css\" href=\"/ui/activation/css/index.css?v=4\" rel=\"stylesheet\">\n<link type=\"text/css\" href=\"/res/bootstrap/css/bootstrap.css\" rel=\"stylesheet\">\n<link type=\"text/css\" href=\"/res/common/css/bootstrap-custom.css?ver=\" rel=\"stylesheet\">\n<link type=\"text/css\" href=\"/res/common/fonts/iconfont.css\" rel=\"stylesheet\">\n<link type=\"text/css\" href=\"/res/ui/loading/showLoading.css\" rel=\"stylesheet\">\n\n\t<link type=\"text/css\" href=\"/res/bootstrap/css/signin.css?ver=&amp;v=6\" rel=\"stylesheet\">\n\t<style type=\"text/css\">\n\t\t@media screen and (max-width:720px) {\n\t\t\t.container {\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t\t.header {\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t\t.jumbotron{\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t\t.jumbotron h2{\n\t\t\t\tfont-size: 24px;\n\t\t\t}\n\t\t\t.jumbotron h3{\n\t\t\t\tfont-size: 20px;\n\t\t\t}\n\t\t\t.dttab h3{font-size: 17px;}\n\t\t}\n\n\t\t/*@media screen and (min-width:720px) {\n            .container {\n                width: 60%;\n            }\n        }*/\n\t\t.eng_cn{position: absolute;right: 20px;top: 20px;color: #2E2E3F;font-size: 16px;}\n\t\t.eng_cn .a_lik{color: #2E2E3F;cursor: pointer;display: none;}\n\t\t.eng_cn .a_lik:hover, .eng_cn .a_lik:active, .eng_cn .a_lik:focus{text-decoration: none;}\n\t\t.glyphicon-globe{vertical-align: top;margin-top: 3px;}\n\t\t.jumbotron.new h2{font-size: 23px;}\n\t\t@media screen and (max-width: 600px) {\n\t\t\t.mainwrap2{background-size: contain;margin-bottom: 20px;height: 60px;}\n\t\t}\n\t</style>\n</head>\n<body>\n<div class=\"wrapper\">\n\t<div class=\"header\">\n\t\t<div class=\"mainwrap2\"></div>\n\t</div>\n\t<div class=\"container font\">\n\t\t<div class=\"jumbotron new\">\n\n\t\t\t<div class=\"eng_cn\">\n\t\t\t\t<span aria-hidden=\"true\" class=\"glyphicon glyphicon-globe\"></span>\n\t\t\t\t<a class=\"a_lik\" id=\"locale_zhongwen\" onclick=\"changeLanguage(id)\">中文</a>\n\t\t\t\t<a class=\"a_lik\" id=\"locale_english\" onclick=\"changeLanguage(id)\" style=\"display: inline;\">English</a>\n\t\t\t\t<form action=\"/f/common/public/locale/change\" method=\"POST\" id=\"locale-form\">\n\t\t\t\t\t<input type=\"hidden\" name=\"target\" value=\"\" id=\"locale-url\">\n\t\t\t\t\t<input type=\"hidden\" name=\"locale\" value=\"\" id=\"locale-locale\">\n\t\t\t\t</form>\n\t\t\t\t<input id=\"eng_cnlanguage\" value=\"zh_CN\" type=\"hidden\">\n\t\t\t</div>\n\n\t\t\t\n\t\t\t<h2>清华大学用户电子身份服务系统</h2>\n\t\t\t<h3>您即将登录&nbsp;&nbsp;<i class=\"glyphicon glyphicon-log-in\"></i>&nbsp;&nbsp;WEBVPN</h3>\n\t\t\t<p id=\"c_note\" style=\"display:none;\"><img src=\"/ui/auth/images/error.gif\" width=\"15\" height=\"15\" class=\"mr5\">\n\t\t\t\t<span id=\"msg_note\" class=\"red\">\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t您的用户名或密码不正确，请重试！\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\n\t\t\t\t\t</span>\n\t\t\t</p>\n\t\t\t<div class=\"wxBox active\" style=\"margin-top: 0\">\n\t\t\t\t<div class=\"dttab\" style=\"margin-top: 14px;\">\n\t\t\t\t\t<h3 class=\"active\" data-id=\"theform\"><span>用户密码登录<!--账号密码--></span></h3>\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t</div>\n\n\t\t\t\t\n\t\t\t\t<div id=\"root\" class=\"tabbox myfield wxyzmdl\" style=\"padding-top: 20px;display: none\"></div>\n\t\t\t\t<form id=\"theform\" class=\"form-signin tabbox show\" method=\"post\" action=\"/do/off/ui/auth/login/check\">\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label for=\"inputUsername\" class=\"sr-only\">用户名</label>\n\t\t\t\t\t\t<input type=\"text\" id=\"i_user\" class=\"form-control\" value=\"\" placeholder=\"学号、工作证号或账号 \" autofocus=\"\" name=\"i_user\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label for=\"inputPassword\" class=\"sr-only\">密码</label>\n\t\t\t\t\t\t<input type=\"password\" id=\"i_pass\" class=\"form-control\" placeholder=\"密码\" onkeydown=\"keyLogin();\">\n\t\t\t\t\t\t<input type=\"hidden\" id=\"sm2pass\" name=\"i_pass\">\n\t\t\t\t\t\t<div style=\"display: none;visibility:hidden\" id=\"sm2publicKey\">04d0c9e1ae89279fe05b435d63e3eba437bf510e09da5f71558974a19dc596724227f08dc2fc6e74bbb9d8b468d4dd5205e9b6793a3bbc48df3fdf219b3ea140e3</div>\n\n\t\t\t\t\t\t<a href=\"/f/recovery/password/reset\"><span id=\"helpBlock\" class=\"help-block forgot-password\">忘记密码</span></a>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div style=\"display: flex; align-items: flex-start; color: #2e2e3f; text-align: left;\">\n\t\t\t\t\t\t<input type=\"checkbox\" name=\"singleLogin\" style=\"margin-top: 5px;\">\n\t\t\t\t\t\t<span style=\"margin-left: 8px; line-height: 1.6;\">\n                                    本次登录使用信任浏览器访问校内其他系统时不必再输入账号密码（统一登录），<span style=\"color:#8b0000;\" \"=\"\">为了您的账号安全，使用完请关闭本浏览器。</span>\n                                </span>\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\t<input type=\"hidden\" name=\"fingerPrint\" id=\"fingerPrint\" value=\"c1e12cfdf76f99f2764ebfb15cbf5e4c\">\n\t\t\t\t\t<input type=\"hidden\" name=\"fingerGenPrint\" id=\"fingerGenPrint\">\n\t\t\t\t\t<input type=\"hidden\" name=\"fingerGenPrint3\" id=\"fingerGenPrint3\">\n\t\t\t\t\t<div id=\"c_code\" class=\"form-group hidden\">\n\t\t\t\t\t\t<label for=\"inputc\" class=\"sr-only\"></label>\n\t\t\t\t\t\t<input type=\"text\" id=\"i_code\" class=\"form-control\" style=\"width: 60%;float: left;\" placeholder=\"图形验证码\" name=\"i_captcha\">\n\t\t\t\t\t\t<img id=\"captcha\" width=\"60\" height=\"45\" style=\"margin-left: 10px;cursor: pointer;float: left;\" class=\"left\" onclick=\"refreshCaptcha()\" src=\"/captcha.jpg?t=1759062641582\">\n\t\t\t\t\t\t<i class=\"glyphicon glyphicon-refresh\" style=\"cursor: pointer;margin-top: 15px;\" onclick=\"refreshCaptcha()\"></i>\n\t\t\t\t\t\t<i id=\"captchaIcon\" class=\"glyphicon hidden\" style=\"margin-top: 15px;\"></i>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div style=\"margin-top: 25px;\">\n\t\t\t\t\t\t<a class=\"btn btn-lg btn-primary btn-block\" type=\"button\" onclick=\"doLogin(); return false;\">登录</a>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t\t\n\t\t</div>\n\t</div>\n\t<div class=\"row footer\">\n    <div class=\"col-md-3\"></div>\n    <div class=\"col-md-3\"><span><i class=\"glyphicon glyphicon-phone-alt\"></i>&nbsp;<a href=\"tel:01062784859\">010-62784859</a> </span></div>\n    <div class=\"col-md-3\"><span><i class=\"glyphicon glyphicon-envelope\"></i>&nbsp;<a href=\"mailto:its@tsinghua.edu.cn\">its@tsinghua.edu.cn</a></span></div>\n    <div class=\"col-md-3\"></div>\n</div>\n\n</div>\n\n<script type=\"text/javascript\">\n\tif($('#eng_cnlanguage').val() == 'zh_CN'){$('#locale_english').show()}\n\tif($('#eng_cnlanguage').val() == 'en_US'){$('#locale_zhongwen').show()}\n\tfunction changeLanguage(id){\n\t\tif(id === \"locale_english\"){\n\t\t\tvar locale_url = window.location.href;\n\t\t\t$('#locale-url').val(locale_url)\n\t\t\t$('#locale-locale').val('en_US');\n\t\t\t$('#locale-form').submit();\n\t\t}\n\t\tif(id === \"locale_zhongwen\"){\n\t\t\tvar locale_url = window.location.href;\n\t\t\t$('#locale-url').val(locale_url)\n\t\t\t$('#locale-locale').val('zh_CN');\n\t\t\t$('#locale-form').submit();\n\t\t}\n\t}\n</script>\n\n<script type=\"text/javascript\" src=\"/res/selfservice/tabshowclick.js?v=37\"></script>\n<script type=\"text/javascript\" src=\"/res/selfservice/finger3.js?v=37\"></script>\n\n\n<script>\n\tvar fingerStr = fingerprintUtil.getFingers();\n\t$(\"#fingerPrint\").val(fingerStr);\n</script>\n</body></html>"
}